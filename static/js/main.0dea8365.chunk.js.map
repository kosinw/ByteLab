{"version":3,"sources":["containers/code-container.js","containers/labs.js","containers/home.js","containers/play.js","components/account.js","containers/topbar.js","containers/app.js","serviceWorker.js","stores/firebase.js","stores/lab.js","stores/login.js","stores/root.js","index.js","assets/heroimage.png","components/canvas.js","utils/canvas.api.js"],"names":["CodeContainer","state","code","onTextUpdate","text","_this","props","labs","currentLab","componentWillUnmount","updateStore","react_default","a","createElement","className","lib_default","value","this","highlight","languages","js","padding","onValueChange","style","fontSize","React","Component","inject","stores","observer","Labs","Home","src","BeegBeegYoshi","Play","canvas","Account","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onAccountClicked","login","signInWithGoogle","onLoggedInClicked","signOut","signInButton","onClick","href","loggedIn","username","currentUser","email","Topbar","Link","to","location","pathname","account","withRouter","App","BrowserRouter","basename","containers_topbar","Switch","Route","path","component","exact","Boolean","window","hostname","match","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","database","auth","googleProvider","GoogleAuthProvider","Lab","name","extendObservable","sprites","defaultCode","createStore","onAuthStateChanged","user","action","signInWithPopup","root","ref","localStorage","setItem","JSON","stringify","getItem","parse","createLoginStore","ReactDOM","render","index_module","containers_app","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports","CANVAS_SIZE","FPS","TIME_PER_FRAME","getFramesPerTime","time","Canvas","C_Workspace_bytelab_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_Workspace_bytelab_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_Workspace_bytelab_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","onFrame","timestamp","update","draw","gameLoop","requestAnimationFrame","cancelGameLoop","componentDidMount","ctx","canvasRef","current","getContext","evalCode","init","setupGameLoop","createRef","shadows","Set","blacklist","globals","C_Workspace_bytelab_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","createAPI","width","height","WIDTH","HEIGHT","BG","keys","forEach","key","shadowString","concat","C_Workspace_bytelab_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","join","createGlobals","skeleton","eval","cancelAnimationFrame","react__WEBPACK_IMPORTED_MODULE_7___default","colors","componentToHex","c","hex","toString","length","getPixel","_ref","x","y","_ctx$getImageData$dat","slicedToArray","getImageData","data","r","g","b","rgbToHex","col","findIndex","setPixel","_ref3","color","fillStyle","fillRect","_ref6","line","x1","y1","x2","y2","_ref2","dx","dy","dx1","dy1","px","py","xe","ye","i","Math","abs","clear","_ref4","clearRect"],"mappings":"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","file":"static/js/main.0dea8365.chunk.js","sourcesContent":["import React from 'react';\r\nimport { observer, inject } from 'mobx-react';\r\n\r\nimport { highlight, languages } from 'prismjs/components/prism-core';\r\nimport 'prismjs/components/prism-clike';\r\nimport 'prismjs/components/prism-javascript';\r\n\r\nimport Editor from 'react-simple-code-editor';\r\n\r\nclass CodeContainer extends React.Component {\r\n    state = {code: ''}\r\n\r\n    onTextUpdate = text => {\r\n        this.props.labs.currentLab.code = text;\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.props.labs.updateStore();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section className=\"code-container\">\r\n            <Editor\r\n                className=\"code-container__editor\"\r\n                value={this.props.labs.currentLab.code}\r\n                highlight={code => highlight(code, languages.js)}\r\n                padding={10}\r\n                onValueChange={this.onTextUpdate}\r\n                style={{\r\n                    fontSize: '0.6em',\r\n                }}\r\n            />\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\nexport default inject(stores => ({ labs: stores.labs }))(observer(CodeContainer));","import React from 'react';\r\n\r\nimport \"../styles/labs.css\";\r\n\r\nclass Labs extends React.Component {\r\n  onLabClicked() {\r\n    //change which lab to look at\r\n  }\r\n\r\n  render () {\r\n        //const placeholder = [\"proj1\", \"proj2\", \"proj3\", \"proj1\", \"proj2\", \"proj3\", \"proj1\", \"proj2\", \"proj3\", \"proj1\", \"proj2\", \"proj3\",];\r\n\r\n        return (\r\n          <div>\r\n            <h3 className = \"labs__title\">Labs</h3>\r\n            <button className=\"labs__new_lab\">New Lab</button>\r\n            <button className=\"labs__save_lab\">Save Lab</button>\r\n            <div className = \"labs\">\r\n              {/* {placeholder.map(x => <button className = \"projects\" onClick={this.onLabClicked} >{x}</button>)} */}\r\n            </div>\r\n          </div>\r\n        );\r\n  }\r\n}\r\n\r\nexport default Labs;","import React from \"react\";\r\n\r\nimport BeegBeegYoshi from '../assets/heroimage.png';\r\nimport '../styles/home.css';\r\n\r\nclass Home extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"home\">\r\n              <h3 className =\"home__title\">ByteLab</h3>\r\n                <p className = \"text__block\">Welcome to ByteLab! This is a JavaScript-based toolset designed to help\r\n                beginner coders get hands-on game making experience. Use the code editor, sprite maker, and map designer\r\n                to create your own 2D game.</p>\r\n                <img src={BeegBeegYoshi}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nimport Canvas from '../components/canvas'\r\nimport '../styles/play.css';\r\n\r\nclass Play extends React.Component {\r\n    render() {\r\n        return (\r\n            <section className=\"play\">\r\n                <Canvas />\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Play;","import React from 'react';\r\nimport { observer, inject } from 'mobx-react';\r\n\r\nclass Account extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    onAccountClicked = () => {\r\n        this.props.login.signInWithGoogle();\r\n    }\r\n\r\n    onLoggedInClicked = () => {\r\n        this.props.login.signOut();\r\n    }\r\n\r\n    signInButton = () => (\r\n        <li onClick={this.onAccountClicked}><a href=\"#\">Sign In</a></li>\r\n    );\r\n\r\n    loggedIn = username => (\r\n        <li onClick={this.onLoggedInClicked} className=\"logged-in\"><a href=\"#\">Signed in as {username}</a></li>\r\n    );\r\n\r\n    render() {\r\n        const { currentUser } = this.props.login;\r\n\r\n        if (!!currentUser) {\r\n            return this.loggedIn(currentUser.email);\r\n        } \r\n        \r\n        return this.signInButton();\r\n    }\r\n}\r\n\r\nexport default inject(stores => ({ login: stores.login }))(observer(Account));","import React from 'react';\r\n\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nimport Account from '../components/account';\r\n\r\nimport '../styles/topbar.css';\r\n\r\nclass Topbar extends React.Component {\r\n    \r\n\r\n    render() {\r\n        return (\r\n            <nav className=\"topbar\">\r\n                <ul className=\"topbar__list\">\r\n                    <li><Link to=\"/\" className={this.props.location.pathname === '/' ? 'selected' : ''}>ByteLab</Link></li>\r\n                    <li><Link to=\"/labs\" className={this.props.location.pathname === '/labs' ? 'selected' : ''}>Labs</Link></li>\r\n                    <li><Link to=\"/code\" className={this.props.location.pathname === '/code' ? 'selected' : ''}>Code</Link></li>\r\n                    <li><Link to=\"/sprites\" className={this.props.location.pathname === '/sprites' ? 'selected' : ''}>Sprites</Link></li>\r\n                    <li><Link to=\"/maps\" className={this.props.location.pathname === '/maps' ? 'selected' : ''}>Maps</Link></li>\r\n                    <li><Link to=\"/play\" className={this.props.location.pathname === '/play' ? 'selected' : ''}>Play</Link></li>\r\n\r\n                    <Account />\r\n                </ul>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Topbar);\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport CodeContainer from './code-container';\r\n\r\nimport Labs from './labs';\r\nimport Home from './home';\r\nimport Play from './play';\r\n\r\nimport Topbar from './topbar'\r\nimport '../styles/app.css'\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <BrowserRouter basename=\"/bytelab\">\r\n        <section className=\"app\">\r\n          <Topbar/>\r\n          <Switch>\r\n            <Route path=\"/labs\" component={Labs}/>\r\n            <Route exact path=\"/\" component={Home}/>\r\n            <Route path=\"/code\" component={CodeContainer} />            \r\n            <Route path=\"/play\" component={Play} />\r\n          </Switch>\r\n        </section>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default observer(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import firebase from 'firebase';\r\n\r\nvar config = {\r\n    apiKey: \"AIzaSyDsfiwmksngWJr3nttiyr_jjVloU-7MIow\",\r\n    authDomain: \"hack-hw19.firebaseapp.com\",\r\n    databaseURL: \"https://hack-hw19.firebaseio.com\",\r\n    projectId: \"hack-hw19\",\r\n    storageBucket: \"hack-hw19.appspot.com\",\r\n    messagingSenderId: \"759165231345\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nexport const db = firebase.database();\r\nexport const auth = firebase.auth();\r\nexport const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n","import { extendObservable, action } from 'mobx';\r\n\r\nfunction Lab(name: '', code: '') {\r\n    extendObservable(this, {\r\n        name,\r\n        code,\r\n        sprites: []\r\n    });\r\n}\r\n\r\nconst defaultCode = `\r\n// here put your initialization code\r\ninit = () => {\r\n\r\n};\r\n\r\n// here put your drawing logic\r\ndraw = () => {\r\n\r\n};\r\n\r\n// here put your update logic\r\nupdate = () => {\r\n\r\n};\r\n`;\r\n\r\nconst createStore = (db, auth) => {\r\n    function LabStore(db, auth) {\r\n        this.ref = db.ref(\"labs\");\r\n        this.auth = auth;\r\n\r\n        extendObservable(this, {\r\n            currentLab: new Lab('', defaultCode),\r\n            labs: [],\r\n            currentUser: null,\r\n            updateStore: () => {\r\n                localStorage.setItem('cached_lab', JSON.stringify(this.currentLab));\r\n            },\r\n        });\r\n\r\n        if (!!auth.currentUser) {\r\n            this.currentUser = auth.currentUser;\r\n        }\r\n\r\n        if (!!localStorage.getItem('cached_lab')) {\r\n            this.currentLab = JSON.parse(localStorage.getItem('cached_lab'));\r\n        }\r\n    }    \r\n\r\n    return new LabStore(db, auth);\r\n}\r\n\r\nexport default createStore;","import { extendObservable, action, computed } from 'mobx';\r\n\r\nconst createStore = (auth, googleProvider) => {\r\n    function Store() {\r\n        this.auth = auth;\r\n        this.googleProvider = googleProvider;\r\n\r\n        auth.onAuthStateChanged(user => {            \r\n            this.currentUser = user;\r\n        });\r\n\r\n        extendObservable(this, {\r\n            currentUser: null,\r\n            signOut: action(() => this.auth.signOut()),\r\n            signInWithGoogle: action(() => this.auth.signInWithPopup(this.googleProvider))\r\n        });\r\n    }\r\n\r\n    return new Store();\r\n}\r\n\r\nexport default createStore;","import * as firebase from './firebase'\r\nimport createStore from './lab';\r\nimport createLoginStore from './login'\r\n\r\nexport default {\r\n    labs: createStore(firebase.db, firebase.auth),\r\n    login: createLoginStore(firebase.auth, firebase.googleProvider)\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/app';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'mobx-react';\nimport stores from './stores/root'\n\nimport './styles/syntax.css';\n\nReactDOM.render(\n<Provider {...stores}>\n    <App />\n</Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\"","import React from 'react';\r\nimport { observer, inject } from 'mobx-react';\r\n\r\nimport createAPI from '../utils/canvas.api';\r\n\r\nconst CANVAS_SIZE = 256;\r\nconst FPS = 60;\r\nconst TIME_PER_FRAME = 1000 / FPS;\r\n\r\nconst getFramesPerTime = time => FPS * time;\r\n\r\nclass Canvas extends React.Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.canvasRef = React.createRef();\r\n\r\n        this.shadows = new Set(['document'])\r\n        this.blacklist = new Set(['eval', 'alert'])        \r\n    }\r\n\r\n    createGlobals() {\r\n        let globals;\r\n\r\n        globals = {\r\n            ...createAPI({\r\n                ctx: this.ctx,\r\n                width: CANVAS_SIZE,\r\n                height: CANVAS_SIZE\r\n            }),\r\n            CANVAS_SIZE,\r\n            WIDTH: CANVAS_SIZE,\r\n            HEIGHT: CANVAS_SIZE,\r\n            draw: null,\r\n            init: null,\r\n            update: null,\r\n            BG: 3\r\n        };\r\n\r\n        Object.keys(globals).forEach(key => {\r\n            window[key] = globals[key]\r\n        });\r\n    }\r\n\r\n    evalCode() {\r\n        const { currentLab } = this.props.labs;\r\n\r\n        const { shadows } = this;\r\n\r\n        const shadowString = `var ${[...shadows].join(',')}`\r\n        \r\n        this.createGlobals();\r\n\r\n        const skeleton = `\r\n            draw = () => {};\r\n            update = () => {};\r\n            init = () => {};\r\n        `;\r\n        \r\n        // eslint-disable-next-line no-eval\r\n        eval(`\r\n            ${shadowString}\r\n\r\n            eval(skeleton)\r\n\r\n            eval(currentLab.code)\r\n\r\n            window.draw = draw;\r\n            window.update = update;\r\n            window.init = init;\r\n        `);        \r\n\r\n        this.draw = window.draw;\r\n        this.update = window.update;\r\n        this.init = window.init;\r\n    }\r\n\r\n    setupGameLoop() {        \r\n        this.gameLoop = window.requestAnimationFrame(this.onFrame);\r\n    }\r\n\r\n    cancelGameLoop() {\r\n        window.cancelAnimationFrame(this.gameLoop);\r\n    }\r\n\r\n    onFrame = (timestamp) => {\r\n        this.update();\r\n        this.draw();\r\n        this.gameLoop = window.requestAnimationFrame(this.onFrame);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.cancelGameLoop();\r\n    }\r\n\r\n    componentDidMount = () => {        \r\n        this.ctx = this.canvasRef.current.getContext('2d');\r\n        this.evalCode();\r\n        this.init();\r\n        this.setupGameLoop();\r\n    }\r\n\r\n    render() {\r\n        return <canvas className=\"canvas\" width=\"256\" height=\"256\" ref={this.canvasRef} />;\r\n    }\r\n}\r\n\r\nexport default inject(stores => ({ labs: stores.labs }))(observer(Canvas));","import alphabet from './alphabet';\r\n\r\nconst colors = [\r\n    '#f8ffba',\r\n    '#332431',\r\n    '#573752',\r\n    '#784465',\r\n    '#8f476a',\r\n    '#a64c6c',\r\n    '#d9577c'\r\n];\r\n\r\nconst bg = 3;\r\n\r\n\r\nfunction componentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\nfunction rgbToHex(r, g, b) {\r\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\nconst getPixel = ({ ctx, x, y }) => {\r\n    const [r, g, b, a] = ctx.getImageData(x, y, 1, 1).data;\r\n\r\n    if (a != 255) {\r\n        return bg;\r\n    }\r\n\r\n    let hex = rgbToHex(r, g, b);\r\n\r\n    let col = colors.findIndex(hex);\r\n\r\n    if (col == -1) {\r\n        return bg;\r\n    }\r\n\r\n    return col;\r\n}\r\n\r\n\r\nconst line = ({ ctx, x1, y1, x2, y2, color }) => {\r\n    // Iterators, counters required by algorithm\r\n    let x, y, dx, dy, dx1, dy1, px, py, xe, ye, i;\r\n\r\n    // Calculate line deltas\r\n    dx = x2 - x1;\r\n    dy = y2 - y1;\r\n\r\n    // Create a positive copy of deltas (makes iterating easier)\r\n    dx1 = Math.abs(dx);\r\n    dy1 = Math.abs(dy);\r\n\r\n    // Calculate error intervals for both axis\r\n    px = 2 * dy1 - dx1;\r\n    py = 2 * dx1 - dy1;\r\n\r\n    // The line is X-axis dominant\r\n    if (dy1 <= dx1) {\r\n\r\n        // Line is drawn left to right\r\n        if (dx >= 0) {\r\n            x = x1; y = y1; xe = x2;\r\n        } else { // Line is drawn right to left (swap ends)\r\n            x = x2; y = y2; xe = x1;\r\n        }\r\n\r\n        setPixel({ ctx, x, y, color });\r\n\r\n        // Rasterize the line\r\n        for (i = 0; x < xe; i++) {\r\n            x = x + 1;\r\n\r\n            // Deal with octants...\r\n            if (px < 0) {\r\n                px = px + 2 * dy1;\r\n            } else {\r\n                if ((dx < 0 && dy < 0) || (dx > 0 && dy > 0)) {\r\n                    y = y + 1;\r\n                } else {\r\n                    y = y - 1;\r\n                }\r\n                px = px + 2 * (dy1 - dx1);\r\n            }\r\n\r\n            // Draw pixel from line span at currently rasterized position\r\n            setPixel({ ctx, x, y, color });\r\n        }\r\n\r\n    } else { // The line is Y-axis dominant\r\n\r\n        // Line is drawn bottom to top\r\n        if (dy >= 0) {\r\n            x = x1; y = y1; ye = y2;\r\n        } else { // Line is drawn top to bottom\r\n            x = x2; y = y2; ye = y1;\r\n        }\r\n\r\n        setPixel({ ctx, x, y, color });\r\n\r\n        // Rasterize the line\r\n        for (i = 0; y < ye; i++) {\r\n            y = y + 1;\r\n\r\n            // Deal with octants...\r\n            if (py <= 0) {\r\n                py = py + 2 * dx1;\r\n            } else {\r\n                if ((dx < 0 && dy<0) || (dx > 0 && dy > 0)) {\r\n                    x = x + 1;\r\n                } else {\r\n                    x = x - 1;\r\n                }\r\n                py = py + 2 * (dx1 - dy1);\r\n            }\r\n\r\n            // Draw pixel from line span at currently rasterized position\r\n            setPixel({ ctx, x, y, color });\r\n        }\r\n    }\r\n}\r\n\r\nconst setPixel = ({ ctx, x, y, color }) => {\r\n    ctx.fillStyle = colors[color % colors.length];\r\n    ctx.fillRect(x, y, 1, 1);\r\n}\r\n\r\nconst clear = ({ ctx }) => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n}\r\n\r\nconst print = ({ ctx, x, y, str, color }) => {\r\n    const c = colors[color % colors.length];\r\n\r\n    const spaces = str\r\n        .split('')\r\n        .map(letter => {\r\n\r\n        });\r\n}\r\n\r\nconst createAPI = ({ ctx, width, height }) => {\r\n    return {\r\n        getPixel(x, y) {\r\n            getPixel({ctx, x, y});\r\n        },\r\n        setPixel(x, y, color) {\r\n            setPixel({ctx, x, y, color});\r\n        },\r\n        line(x1, y1, x2, y2, color) {\r\n            line({ctx, x1, y1, x2, y2, color});\r\n        },\r\n        clear() {\r\n            clear({ ctx });\r\n        }\r\n    };\r\n};\r\n\r\nexport default createAPI;\r\n"],"sourceRoot":""}